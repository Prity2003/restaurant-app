{"ast":null,"code":"import _regeneratorRuntime from\"/home/nilesh/prity/restaurant-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/nilesh/prity/restaurant-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{toasterMsg}from\"../Components/Toaster\";import{logout}from'../Pages/Login/store/auth.action';import store from\"../store\";export var apiClient=axios.create();apiClient.defaults.withCredentials=true;export var apiEndpoint=\"http://localhost:9001/api\";export var setAuthToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(token){apiClient.defaults.headers.common['Authorization']='bearer '+token;}else{delete apiClient.defaults.headers.common['Authorization'];}case 1:case\"end\":return _context.stop();}},_callee);}));return function setAuthToken(_x){return _ref.apply(this,arguments);};}();apiClient.interceptors.response.use(function(response){return response.data;},function(error){if(error.response&&error.response.status===401){store.dispatch(logout());toasterMsg(error.response.data.message||error.response.data,'danger');}throw error.response?error.response.data:error;});export var config={headers:{'content-type':'multipart/form-data'}};","map":{"version":3,"names":["axios","toasterMsg","logout","store","apiClient","create","defaults","withCredentials","apiEndpoint","setAuthToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","wrap","_callee$","_context","prev","next","headers","common","stop","_x","apply","arguments","interceptors","response","use","data","error","status","dispatch","message","config"],"sources":["/home/nilesh/prity/restaurant-app/src/services/api.services.js"],"sourcesContent":["import axios from 'axios';\r\nimport { toasterMsg } from \"../Components/Toaster\";\r\nimport { logout } from '../Pages/Login/store/auth.action';\r\nimport store from \"../store\";\r\n\r\nexport const apiClient = axios.create();\r\napiClient.defaults.withCredentials = true;\r\n\r\nexport const apiEndpoint = `http://localhost:9001/api`;\r\n\r\nexport const setAuthToken = async (token) => {\r\n    if (token) {\r\n        apiClient.defaults.headers.common['Authorization'] = 'bearer ' + token;\r\n    } else {\r\n        delete apiClient.defaults.headers.common['Authorization'];\r\n    }\r\n};\r\n\r\n\r\napiClient.interceptors.response.use(\r\n    (response) => {\r\n        return response.data;\r\n    },\r\n    (error) => {\r\n        if (error.response && error.response.status === 401) {\r\n            store.dispatch(logout());\r\n            toasterMsg(error.response.data.message || error.response.data, 'danger');\r\n        }\r\n        throw error.response ? error.response.data : error;\r\n    }\r\n);\r\n\r\nexport const config = {\r\n    headers: {\r\n        'content-type': 'multipart/form-data',\r\n    },\r\n};\r\n"],"mappings":"8PAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,uBAAuB,CAClD,OAASC,MAAM,KAAQ,kCAAkC,CACzD,MAAO,CAAAC,KAAK,KAAM,UAAU,CAE5B,MAAO,IAAM,CAAAC,SAAS,CAAGJ,KAAK,CAACK,MAAM,CAAC,CAAC,CACvCD,SAAS,CAACE,QAAQ,CAACC,eAAe,CAAG,IAAI,CAEzC,MAAO,IAAM,CAAAC,WAAW,4BAA8B,CAEtD,MAAO,IAAM,CAAAC,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,KAAK,SAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACpC,GAAIL,KAAK,CAAE,CACPX,SAAS,CAACE,QAAQ,CAACe,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CAAG,SAAS,CAAGP,KAAK,CAC1E,CAAC,IAAM,CACH,MAAO,CAAAX,SAAS,CAACE,QAAQ,CAACe,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CAC7D,CAAC,wBAAAJ,QAAA,CAAAK,IAAA,MAAAT,OAAA,GACJ,kBANY,CAAAL,YAAYA,CAAAe,EAAA,SAAAd,IAAA,CAAAe,KAAA,MAAAC,SAAA,OAMxB,CAGDtB,SAAS,CAACuB,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC/B,SAACD,QAAQ,CAAK,CACV,MAAO,CAAAA,QAAQ,CAACE,IAAI,CACxB,CAAC,CACD,SAACC,KAAK,CAAK,CACP,GAAIA,KAAK,CAACH,QAAQ,EAAIG,KAAK,CAACH,QAAQ,CAACI,MAAM,GAAK,GAAG,CAAE,CACjD7B,KAAK,CAAC8B,QAAQ,CAAC/B,MAAM,CAAC,CAAC,CAAC,CACxBD,UAAU,CAAC8B,KAAK,CAACH,QAAQ,CAACE,IAAI,CAACI,OAAO,EAAIH,KAAK,CAACH,QAAQ,CAACE,IAAI,CAAE,QAAQ,CAAC,CAC5E,CACA,KAAM,CAAAC,KAAK,CAACH,QAAQ,CAAGG,KAAK,CAACH,QAAQ,CAACE,IAAI,CAAGC,KAAK,CACtD,CACJ,CAAC,CAED,MAAO,IAAM,CAAAI,MAAM,CAAG,CAClBd,OAAO,CAAE,CACL,cAAc,CAAE,qBACpB,CACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}